(this["webpackJsonpcourse-management-app"]=this["webpackJsonpcourse-management-app"]||[]).push([[0],{30:function(e,t){e.exports={newCourse:{id:null,title:"",authorId:null,category:""},courses:[{id:1,title:"Securing React Apps with Auth0",slug:"react-auth0-authentication-security",authorId:1,category:"JavaScript"},{id:2,title:"React: The Big Picture",slug:"react-big-picture",authorId:1,category:"JavaScript"},{id:3,title:"Creating Reusable React Components",slug:"react-creating-reusable-components",authorId:1,category:"JavaScript"},{id:4,title:"Building a JavaScript Development Environment",slug:"javascript-development-environment",authorId:1,category:"JavaScript"},{id:5,title:"Building Applications with React and Redux",slug:"react-redux-react-router-es6",authorId:1,category:"JavaScript"},{id:6,title:"Building Applications in React and Flux",slug:"react-flux-building-applications",authorId:1,category:"JavaScript"},{id:7,title:"Clean Code: Writing Code for Humans",slug:"writing-clean-code-humans",authorId:1,category:"Software Practices"},{id:8,title:"Architecting Applications for the Real World",slug:"architecting-applications-dotnet",authorId:1,category:"Software Architecture"},{id:9,title:"Becoming an Outlier: Reprogramming the Developer Mind",slug:"career-reboot-for-developer-mind",authorId:1,category:"Career"},{id:10,title:"Web Component Fundamentals",slug:"web-components-shadow-dom",authorId:1,category:"HTML5"}],authors:[{id:1,name:"Cory House"},{id:2,name:"Scott Allen"},{id:3,name:"Dan Wahlin"}]}},31:function(e,t,r){e.exports=r(53)},4:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"f",(function(){return c})),r.d(t,"e",(function(){return a})),r.d(t,"g",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return i}));var n="CREATE_COURSE",c="LOAD_COURSES_SUCCESS",a="LOAD_AUTHORS_SUCCESS",o="UPDATE_COURSE",s="BEGIN_API_CALL",u="END_API_CALL",i="DELETE_COURSE_OPTIMISTIC"},49:function(e,t,r){},51:function(e,t,r){},52:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(13),o=r(8),s=(r(41),r(3)),u=r(1),i=function(){return Object(u.jsxs)("div",{className:"jumbotron",children:[Object(u.jsx)("h1",{children:"Pluralsight Administration"}),Object(u.jsx)("p",{children:"React, Redux and React Router for ulta-responsive web apps."}),Object(u.jsx)(o.b,{to:"about",className:"btn btn-primary btn-lg",children:"Learn more"})]})},l=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"About"}),Object(u.jsx)("p",{children:"This app uses React, Redux, React Router, and many other helpful libraries"})]})},d=function(){var e={color:"#F15B2A"};return Object(u.jsxs)("nav",{children:[Object(u.jsx)(o.c,{to:"/",activeStyle:e,exact:!0,children:"Home"})," | ",Object(u.jsx)(o.c,{to:"/courses",activeStyle:e,children:"Courses"})," | ",Object(u.jsx)(o.c,{to:"/about",activeStyle:e,children:"About"})]})},h=function(){return Object(u.jsx)("h1",{children:"Oops! Page not found."})},j=r(11),b=r(27),p=r(28),f=r(35),O=r(33),g=r(15),v=r(4),m=r(26),x=r.n(m),C=r(29);function y(e){return S.apply(this,arguments)}function S(){return(S=Object(C.a)(x.a.mark((function e(t){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!t.ok){e.next=3;break}return e.abrupt("return",t.json());case 3:if(400!==t.status){e.next=8;break}return e.next=6,t.text();case 6:throw r=e.sent,new Error(r);case 8:throw new Error("Network response was not ok.");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){throw console.error("API call failed. "+e),e}var I="https://course-management-app-backend.herokuapp.com/",w=I+"courses/";function E(){return{type:v.a}}function R(){return{type:v.d}}function k(){return function(e){return e(E()),fetch(w).then(y).catch(A).then((function(t){e(function(e){return{type:v.f,courses:e}}(t)),e(R())})).catch((function(t){throw e(R()),t}))}}function N(e){return function(t){return t(function(e){return{type:v.c,course:e}}(e)),r=e.id,fetch(w+r,{method:"DELETE"}).then(y).catch(A);var r}}function D(){return function(e){return e(E()),fetch("https://course-management-app-backend.herokuapp.com/authors/").then(y).catch(A).then((function(t){e(function(e){return{type:v.e,authors:e}}(t)),e(R())})).catch((function(t){throw e(R()),t}))}}var T=r(10);var P=function(e){var t=e.courses,r=e.onDeleteClick;return Object(u.jsxs)("table",{className:"table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{}),Object(u.jsx)("th",{children:"Title"}),Object(u.jsx)("th",{children:"Author"}),Object(u.jsx)("th",{children:"category"}),Object(u.jsx)("th",{})]})}),Object(u.jsx)("tbody",{children:t.map((function(e){return function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("a",{className:"btn btn-light",href:"http://pluralsight.com/courses/"+e.slug,children:"Watch"})}),Object(u.jsx)("td",{children:Object(u.jsx)(o.b,{to:"/course/"+e.slug,children:e.title})}),Object(u.jsx)("td",{children:e.author?e.author.name:""}),Object(u.jsx)("td",{children:e.category}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{className:"btn btn-danger",onClick:function(){return t(e)},children:"Delete"})})]},e.id)}(e,r)}))})]})},L=(r(49),function(){return Object(u.jsxs)("div",{className:"lds-roller",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})}),_=r(12),B=function(e){Object(f.a)(r,e);var t=Object(O.a)(r);function r(){var e;Object(b.a)(this,r);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={redirectToAddCoursePage:!1},e}return Object(p.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.courses,r=e.authors,n=e.actions;0===t.length&&n.loadCourses().catch((function(e){alert("Loading courses failed "+e)})),0===r.length&&n.loadAuthors().catch((function(e){alert("Loading authors failed "+e)}))}},{key:"handleDeleteCourse",value:function(e){_.b.success("Course Deleted"),this.props.actions.deleteCourse(e).catch((function(e){return _.b.error("Delete Failed. "+e.message,{autoClose:!1})}))}},{key:"render",value:function(){var e=this;return Object(u.jsxs)(u.Fragment,{children:[this.state.redirectToAddCoursePage&&Object(u.jsx)(s.a,{to:"/course/"}),Object(u.jsx)("h2",{children:"Courses"}),this.props.loading?Object(u.jsx)(L,{}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{style:{marginBottom:20},className:"btn btn-primary add-course",onClick:function(){return e.setState({redirectToAddCoursePage:!0})},children:"Add Course"}),Object(u.jsx)(P,{courses:this.props.courses,onDeleteClick:function(t){return e.handleDeleteCourse(t)}})]})]})}}]),r}(c.a.Component),J=Object(g.b)((function(e){return{courses:e.courses.map((function(t){return Object(j.a)(Object(j.a)({},t),{},{author:e.authors.find((function(e){return e.id===t.authorId}))})})),authors:e.authors,loading:e.apiCalls>0}}),(function(e){return{actions:{loadCourses:Object(T.b)(k,e),deleteCourse:Object(T.b)(N,e),loadAuthors:Object(T.b)(D,e)}}}))(B),F=r(19),U=r(21),H=r(36);var W=function(e){var t=e.name,r=e.label,n=e.onChange,c=e.placeholder,a=e.value,o=e.error,s="form-group";return o&&0!==o.length&&(s+=" has-error"),Object(u.jsxs)("div",{className:s,children:[Object(u.jsx)("label",{htmlFor:t,children:r}),Object(u.jsx)("input",{type:"text",name:t,className:"form-control",onChange:n,placeholder:c,value:a}),o&&Object(u.jsx)("div",{className:"alert alert-danger",children:o})]})};var M=function(e){var t=e.name,r=e.label,n=e.onChange,c=e.defaultOption,a=e.value,o=e.error,s=e.options;return Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:t,children:r}),Object(u.jsxs)("div",{className:"field",children:[" ",Object(u.jsxs)("select",{name:t,value:a,onChange:n,className:"form-control",children:[Object(u.jsx)("option",{value:"",children:c}),s.map((function(e){return Object(u.jsx)("option",{value:e.value,children:e.text},e.value)}))]}),o&&Object(u.jsx)("div",{className:"alert alert-danger",children:o})]})]})};var q=function(e){var t=e.course,r=e.authors,n=e.onSave,c=e.onChange,a=e.saving,o=void 0!==a&&a,s=e.errors,i=void 0===s?{}:s;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsx)("h2",{children:t.id?"Edit":"Add"}),i.onSave&&Object(u.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[i.onSave,";"]}),Object(u.jsx)(W,{name:"title",label:"Title",onChange:c,value:t.title,error:i.title}),Object(u.jsx)(M,{name:"authorId",label:"Author",value:t.authorId||"",defaultOption:"Select Author",options:r.map((function(e){return{value:e.id,text:e.name}})),onChange:c,error:i.authorId}),Object(u.jsx)(W,{name:"category",label:"Category",onChange:c,value:t.category,error:i.category}),Object(u.jsx)("button",{type:"submit",disabled:o,className:"btn btn-primary",children:o?"Saving...":"Save"})]})},G=r(30),z=["courses","authors","loadCourses","saveCourse","loadAuthors","history"];var K={loadCourses:k,saveCourse:function(e){return function(t){return t(E()),function(e){return console.log(w),fetch(w+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(y).catch(A)}(e).then((function(r){e.id?t(function(e){return{type:v.g,course:e}}(r)):t(function(e){return{type:v.b,course:e}}(r)),t(R())})).catch((function(e){throw t(R()),e}))}},loadAuthors:D},Q=Object(g.b)((function(e,t){var r=t.match.params.slug;return{course:r?function(e,t){return e.find((function(e){return e.slug===t}))}(e.courses,r):G.newCourse,courses:e.courses,authors:e.authors}}),K)((function(e){var t=e.courses,r=e.authors,c=e.loadCourses,a=e.saveCourse,o=e.loadAuthors,s=e.history,i=Object(H.a)(e,z),l=Object(n.useState)(Object(j.a)({},i.course)),d=Object(U.a)(l,2),h=d[0],b=d[1],p=Object(n.useState)({}),f=Object(U.a)(p,2),O=f[0],g=f[1],v=Object(n.useState)(!1),m=Object(U.a)(v,2),x=m[0],C=m[1];return Object(n.useEffect)((function(){0===t.length?c().catch((function(e){alert("Loading courses failed "+e)})):b(Object(j.a)({},i.course)),0===r.length&&o().catch((function(e){alert("Loading authors failed "+e)}))}),[i.course]),0===r.length||0===r.length?Object(u.jsx)(L,{}):Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(q,{course:h,errors:O,authors:r,onChange:function(e){var t=e.target,r=t.name,n=t.value;b((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(F.a)({},r,"authorId"===r?parseInt(n,10):n))}))},onSave:function(e){e.preventDefault(),function(){var e=h.title,t=h.authorId,r=h.category,n={};return e||(n.title="Title is required."),t||(n.authorId="Author is required."),r||(n.category="Category is required."),g(n),0===Object.keys(n).length}()&&(C(!0),a(h).then((function(){_.b.success("Course Saved"),s.push("/courses")})).catch((function(e){C(!1),g({onSave:e.message})})))},saving:x})})}));r(50);var V=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)(d,{}),Object(u.jsxs)(s.d,{children:[Object(u.jsx)(s.b,{exact:!0,path:"/",component:i}),Object(u.jsx)(s.b,{path:"/about",component:l}),Object(u.jsx)(s.b,{path:"/courses",component:J}),Object(u.jsx)(s.b,{path:"/course/:slug",component:Q}),Object(u.jsx)(s.b,{path:"/course",component:Q}),Object(u.jsx)(s.b,{component:h})]}),Object(u.jsx)(_.a,{autoClose:3e3,hideProgressBar:!0})]})},X=(r(51),r(31)),Y=r.n(X)()();Object(a.render)(Object(u.jsx)(g.a,{store:Y,children:Object(u.jsx)(o.a,{children:Object(u.jsx)(V,{})})}),document.getElementById("app"))},53:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(10),c=r(34),a=r(4),o={courses:[],authors:[],apiCallsInProgress:0};var s=Object(n.c)({courses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.courses,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.b:return[].concat(Object(c.a)(e),[t.course]);case a.f:return t.courses;case a.g:return e.map((function(e){return e.id===t.course.id?t.course:e}));case a.c:return e.filter((function(e){return e.id!==t.course.id}));default:return e}},authors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.authors,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.e:return t.authors;default:return e}},apiCalls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.apiCallsInProgress,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.a:return e+1;case a.d:return e-1;default:return e}}}),u=r(32);function i(e){return Object(n.d)(s,e,Object(n.a)(u.a))}}},[[52,1,2]]]);
//# sourceMappingURL=main.04ae7304.chunk.js.map